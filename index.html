<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>剧盒，追剧宝盒</title>
</head>
<body>
	<h1><a href="https://vxc9.github.io/i.html">安装剧盒App</a></h1>
	<h2>输入您的专属看剧口令：</h2>
  <h2 id="code"></h2>
  <h2>领取1000金币</h2>
</body>
<script type="text/javascript">
    var hash = window.location.hash;
    var code = hash.substring(1, 5);
    document.getElementById('code').innerHTML = string62to10(code);
    var index = hash.substring(5, 6);
    //console.log(index);
    getUrl(index);
    
    function string62to10(number_code) {
        var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ',
            radix = chars.length,
            number_code = String(number_code),
            len = number_code.length,
            i = 0,
            origin_number = 0;
        while (i < len) {
            origin_number += Math.pow(radix, i++) * chars.indexOf(number_code.charAt(len - i) || 0);
        }
        return origin_number;
    }
    
    function getUrl(vid) {
        const api = 'https://service-ifkp9sue-1320134514.jp.apigw.tencentcs.com/api1?v=';
        fetch(api + vid, {
            method: "get",
        })
            .then((response) => response.text())
            .then((data) => {
                // window.location.replace(data);
                const a = document.createElement('a')
                a.rel = 'noreferrer'
                a.href = data
                a.click()
            })
            .catch((err) => {
                console.log(err);
            }).finally(() => {
    
            });
    }
</script>
</html>
